<div class="row mainRosa justify-content-evenly">
  <div class="col-lg-4 d-flex flex-column justify-content-center">
    <div class="imgLine">
      <hr />
      <img
        src="../../../../assets/img/img1.png"
        alt="Imagem Decorativa"
        class="imgTitle"
      />
    </div>
    <h1 class="tituloGrande">Clientes</h1>
    <hr />
  </div>

  <div class="col-lg-6 d-flex flex-column justify-content-center">
    <div>
      <div class="row justify-content-evenly align-items-end">
        <div class="col-5" style="text-align: left">
          <label for="searchtype">Pesquisar por:</label>
          <select
            name="searchtype"
            id="searchtype"
            class="form-control"
            [(ngModel)]="searchType"
          >
            <option value="">Selecionar</option>
            <option value="nome">Nome</option>
            <option value="cpf">CPF</option>
          </select>
        </div>

        <div class="col-5">
          <input
            type="text"
            id="search"
            class="form-control"
            placeholder="Digite sua pesquisa..."
            [(ngModel)]="search"
            [mask]="searchType === 'cpf' ? '000.000.000-00' : ''"
            [dropSpecialCharacters]="false"
          />
        </div>

        <div class="col-1">
          <button type="button" (click)="aplicarFiltro()" class="btnIcon">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="loading" class="mt-3 text-center">
      <i class="fa-solid fa-spinner fa-spin"></i> Carregando clientes...
    </div>

    <div *ngIf="errorMessage && !loading" class="alert alert-danger mt-3">
      {{ errorMessage }}
    </div>

    <div *ngIf="!loading && !errorMessage" class="containerTabela">
      <div class="tabela">
        <table>
          <thead>
            <tr>
              <th>CPF</th>
              <th>Nome</th>
              <th>Cidade</th>
              <th>Estado</th>
              <th>Saldo</th>
              <th>Limite</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cliente of clientesFiltrados">
              <td>{{ (cliente.cpf | mask: "000.000.000-00") }}</td>
              <td>{{ cliente.nome }}</td>
              <td>{{ cliente.cidade }}</td>
              <td>{{ cliente.estado }}</td>
              <td>
                {{ cliente.saldo | currency: "BRL" : "symbol" : "1.2-2" }}
              </td>
              <td>
                {{ cliente.limite | currency: "BRL" : "symbol" : "1.2-2" }}
              </td>
              <td>
                <a [routerLink]="['/clients', cliente.cpf]" class="btnIcon">
                  <i class="fa-solid fa-magnifying-glass"></i>
                </a>
              </td>
            </tr>
            <tr *ngIf="clientesFiltrados.length === 0">
              <td colspan="7" class="text-center text-muted">
                Nenhum cliente encontrado para este gerente.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="d-flex justify-content-end mt-3">
      <a routerLink="/gerente/home" class="btnIcon" routerLinkActive="active">
        <i class="fa-solid fa-location-arrow btnVoltar"></i>
      </a>
    </div>
  </div>
</div>
